# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: francesca <francesca@student.42.fr>        +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2025/11/18 14:00:00 by your_name         #+#    #+#              #
#    Updated: 2025/11/20 09:37:05 by francesca        ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

# â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
# Colors for Output
# â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
GREEN		=	\033[0;32m
YELLOW		=	\033[0;33m
RED			=	\033[0;31m
BLUE		=	\033[0;34m
MAGENTA		=	\033[0;35m
CYAN		=	\033[0;36m
RESET		=	\033[0m

#â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
# Directories and Files
#â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
SRCS_DIR	=	./src/
OBJS_DIR	=	obj
INC_DIR		=	./inc/

# Trova automaticamente tutti i file .cpp nella directory corrente
SRCS		=	$(wildcard $(SRCS_DIR)*.cpp)
# Trasforma src/xxx.cpp -> obj/xxx.o
OBJS		=	$(patsubst $(SRCS_DIR)%.cpp,$(OBJS_DIR)/%.o,$(SRCS))

#â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
# Compiler and Flags
#â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
NAME		=	UnnecessaryViolence
CXX			=	c++
CXXFLAGS	=	-Wall -Wextra -Werror -std=c++98 -I$(INC_DIR)
RM			=	rm -f

#â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
# Rules
#â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“

# Default rule: Build the executable
all:			$(NAME)

# Create the object directory
$(OBJS_DIR):
			@echo "$(YELLOW)ğŸ“ Creating object directory...$(RESET)"
			@mkdir -p $(OBJS_DIR)

# Compile source files into object files
$(OBJS_DIR)/%.o: 	$(SRCS_DIR)%.cpp | $(OBJS_DIR)
			@echo "$(BLUE)ğŸ”¨ Compiling $<...$(RESET)"
			@$(CXX) $(CXXFLAGS) -c $< -o $@

# Link object files to create the executable
$(NAME):		$(OBJS)
				@echo "$(GREEN)ğŸ”— Linking objects and creating $(NAME)...$(RESET)"
				@$(CXX) $(CXXFLAGS) -o $(NAME) $(OBJS)
				@echo "\n$(MAGENTA)â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—$(RESET)"
				@echo "$(MAGENTA)â•‘                                          â•‘$(RESET)"
				@echo "$(MAGENTA)â•‘$(GREEN) UNNECESSARY VIOLENCE EX 03 COMPILED      $(MAGENTA)â•‘$(RESET)"
				@echo "$(MAGENTA)â•‘                                          â•‘$(RESET)"
				@echo "$(MAGENTA)â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•$(RESET)"
				@echo ""
				@echo "$(BLUE) â•¦ â•¦â•¦ â•¦â•”â•¦â•—â•”â•â•—â•”â•—â•”â•”â•â•—"
				@echo "$(BLUE) â• â•â•£â•‘ â•‘â•‘â•‘â•‘â• â•â•£â•‘â•‘â•‘â•šâ•â•—"
				@echo "$(BLUE) â•© â•©â•šâ•â•â•© â•©â•© â•©â•â•šâ•â•šâ•â•$(RESET)"
				@echo ""
				@echo "$(CYAN)â†’ Executable: $(NAME)$(RESET)"
				@echo "$(CYAN)â†’ Run with: ./$(NAME)$(RESET)\n"

# Clean object files
clean:
				@echo "$(RED)ğŸ§¹ Cleaning object files...$(RESET)"
				@$(RM) $(OBJS)
				@$(RM) -r $(OBJS_DIR)
				@echo "$(GREEN)âœ“ Clean complete!$(RESET)"

# Clean object files and remove the executable
fclean:			clean
				@echo "$(RED)ğŸ—‘ï¸  Removing executable...$(RESET)"
				@$(RM) $(NAME)
				@echo "$(GREEN)âœ“ Full clean complete!$(RESET)"

# Rebuild the project from scratch
re:				fclean all

# Show compilation info
info:
				@echo "$(CYAN)â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—$(RESET)"
				@echo "$(CYAN)â•‘         COMPILATION INFO               â•‘$(RESET)"
				@echo "$(CYAN)â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•$(RESET)"
				@echo "$(YELLOW)Executable:$(RESET)  $(NAME)"
				@echo "$(YELLOW)Compiler:$(RESET)    $(CXX)"
				@echo "$(YELLOW)Flags:$(RESET)       $(CXXFLAGS)"
				@echo "$(YELLOW)Sources:$(RESET)     $(SRCS)"
				@echo "$(YELLOW)Objects:$(RESET)     $(OBJS)"
				@echo ""

#â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
# Phony Targets
#â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“
.PHONY:			all clean fclean re info